<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Conversion to/from Markdown · MarkdownAST</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MarkdownAST</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../elements/">Markdown AST elements</a></li><li><a class="tocitem" href="../node/">Tree node interface</a></li><li><a class="tocitem" href="../astmacro/">Constructing trees</a></li><li><a class="tocitem" href="../iteration/">Iteration over trees</a></li><li class="is-active"><a class="tocitem" href>Conversion to/from <code>Markdown</code></a><ul class="internal"><li><a class="tocitem" href="#Conversion-from-standard-library-representation"><span>Conversion from standard library representation</span></a></li><li><a class="tocitem" href="#Conversion-to-standard-library-representation"><span>Conversion to standard library representation</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Conversion to/from <code>Markdown</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Conversion to/from <code>Markdown</code></a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDocs/MarkdownAST.jl" title="View the repository on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDocs/MarkdownAST.jl/blob/main/docs/src/stdlib.md" title="Edit source on GitHub"><span class="docs-icon fas"></span></a><a class="docs-settings-button docs-navbar-link fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button docs-navbar-link fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Conversion-to-and-from-Markdown-standard-library"><a class="docs-heading-anchor" href="#Conversion-to-and-from-Markdown-standard-library">Conversion to and from <code>Markdown</code> standard library</a><a id="Conversion-to-and-from-Markdown-standard-library-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion-to-and-from-Markdown-standard-library" title="Permalink"></a></h1><p>The <a href="https://docs.julialang.org/en/v1/stdlib/Markdown/"><code>Markdown</code> standard library</a> in Julia provides an alternative representation of the Markdown AST. In particular, the parser and AST there is internally used by Julia for docstrings, and is also used by some of the tooling in the Julia ecosystem that deals with Markdown.</p><p>MarkdownAST supports bi-directional conversion between the two AST representations via the <code>convert</code> function. The conversion, however, is not perfect since there are differences in what and how the two libraries represent the Markdown AST.</p><h2 id="Conversion-from-standard-library-representation"><a class="docs-heading-anchor" href="#Conversion-from-standard-library-representation">Conversion from standard library representation</a><a id="Conversion-from-standard-library-representation-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion-from-standard-library-representation" title="Permalink"></a></h2><p>Any AST that is produced by the <code>Markdown</code> standard library parser should parse into MarkdownAST AST. However, as the data structures for the elements in <code>Markdown</code> are pretty loose in what they allow, user-crafted <code>Markdown</code> ASTs may error if it does not exactly follow the conventions of the <code>Markdown</code> parser.</p><article class="docstring"><header><a class="docstring-binding" id="Base.convert-Tuple{Type{MarkdownAST.Node}, Markdown.MD}" href="#Base.convert-Tuple{Type{MarkdownAST.Node}, Markdown.MD}"><code>Base.convert</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convert(::Type{Node}, md::Markdown.MD) -&gt; Node
convert(::Type{Node{M}}, md::Markdown.MD, meta=M) where M -&gt; Node{M}</code></pre><p>Converts a standard library Markdown AST into MarkdownAST representation.</p><p>Note that it is not possible to convert subtrees, as only <code>MD</code> objects can be converted. The result will be a tree with <a href="../elements/#MarkdownAST.Document"><code>Document</code></a> as the root element.</p><p>When the type argument passed is <code>Node</code>, the resulting tree will be constructed of objects of the default node type <code>Node{Nothing}</code>. However, it is also possible to convert into MarkdownAST trees that have custom metadata field of type <code>M</code>, in which case the <code>M</code> type must have a zero-argument constructor available, which will be called whenever a new <code>Node</code> object gets constructed.</p><p>It is also possible to use a custom function to construct the <code>.meta</code> objects via the `meta argument, which must be a callable object with a zero-argument method, and that then gets called every time a new node is constructed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/MarkdownAST.jl/blob/30844f9496c56f9e0cde794adf67021823a4cea2/src/stdlib/fromstdlib.jl#L2-L20">source</a></section></article><p>Due to the differences between the Markdown representations, the following things should be kept in mind when converting from the standard library AST into MarkdownAST representation:</p><ul><li>The standard library parser does not have a dedicated type for representing backslashes, and instead stores them as separate single-character text nodes containing a backslash (i.e. <code>&quot;\\&quot;</code>).</li><li>Soft line breaks are ignored in the standard library parser and represented with a space instead.</li><li>Strings (or <code>Markdown</code> elements) interpolated into the standard library Markdown (e.g. in docstrings or with the <code>@md_str</code> macro) are indistinguishable from text (or corresponding Markdown) nodes in the standard library AST, and therefore will not be converted into <a href="../elements/#MarkdownAST.JuliaValue"><code>JuliaValue</code>s</a>.</li><li>The standard library allows for block-level interpolation. These get converted into inline <a href="../elements/#MarkdownAST.JuliaValue"><code>JuliaValue</code>s</a> wrapped in a <a href="../elements/#MarkdownAST.Paragraph"><code>Paragraph</code></a> element.</li><li>In case the standard library AST contains any inline nodes in block context (e.g. as children for <code>Markdown.MD</code>), the get wrapped in a <a href="../elements/#MarkdownAST.Paragraph"><code>Paragraph</code></a> element too.</li><li>When converting a <code>Markdown.Table</code>, the resulting table will be normalized, such as adding empty cells to rows, to make sure that all rows have the same number of cells.</li><li>For links and images, the <code>.title</code> attribute is set to an empty string, since the standard library AST does not support parsing titles.</li></ul><h2 id="Conversion-to-standard-library-representation"><a class="docs-heading-anchor" href="#Conversion-to-standard-library-representation">Conversion to standard library representation</a><a id="Conversion-to-standard-library-representation-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion-to-standard-library-representation" title="Permalink"></a></h2><p>Any AST that contains only <a href="../elements/#Markdown-AST-elements">the native MarkdownAST elements</a> can be converted into the standard library representation. The conversion of user-defined elements, however, is not supported and will lead to an error.</p><article class="docstring"><header><a class="docstring-binding" id="Base.convert-Tuple{Type{Markdown.MD}, MarkdownAST.Node}" href="#Base.convert-Tuple{Type{Markdown.MD}, MarkdownAST.Node}"><code>Base.convert</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convert(::Type{Markdown.MD}, node::Node) -&gt; Markdown.MD</code></pre><p>Converts a MarkdownAST representation of a Markdown document into the <code>Markdown</code> standard library representation.</p><p>Note that the root node <code>node</code> must a <a href="../elements/#MarkdownAST.Document"><code>Document</code></a> element.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/MarkdownAST.jl/blob/30844f9496c56f9e0cde794adf67021823a4cea2/src/stdlib/tostdlib.jl#L4-L11">source</a></section></article><p>Due to the differences between the Markdown representations, the following things should be kept in mind when converting from the MarkdownAST representation into the standard library AST:</p><ul><li>The value from a <a href="../elements/#MarkdownAST.JuliaValue"><code>JuliaValue</code></a> element (i.e. <code>.ref</code>) gets stored directly in the AST (just like variable interpolation with docstrings and the <code>@md_str</code> macro). This means that, for example, an interpolated string or <code>Markdown</code> element would become a valid AST element, losing the information that it used to be interpolated.</li><li>The expression information in a <a href="../elements/#MarkdownAST.JuliaValue"><code>JuliaValue</code></a> element (i.e. the <code>.ex</code> field) gets discarded.</li><li>The <code>.title</code> attribute of <a href="../elements/#MarkdownAST.Link"><code>Link</code></a> and <a href="../elements/#MarkdownAST.Image"><code>Image</code></a> elements gets discarded.</li><li>The standard library does not support storing the child nodes of <a href="../elements/#MarkdownAST.Image"><code>Image</code></a> elements (i.e. &quot;alt text&quot;, <code>![alt text]()</code>) as AST, and it is instead reduced to a string with the help of the <code>Markdown.plain</code> function.</li><li>The standard library AST does not have dedicated elements for <a href="../elements/#MarkdownAST.SoftBreak"><code>SoftBreak</code></a> and <a href="../elements/#MarkdownAST.Backslash"><code>Backslash</code></a>, and these get converted into strings (i.e. text elements) instead.</li></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Base.convert-Tuple{Type{MarkdownAST.Node}, Markdown.MD}"><code>Base.convert</code></a></li><li><a href="#Base.convert-Tuple{Type{Markdown.MD}, MarkdownAST.Node}"><code>Base.convert</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../iteration/">« Iteration over trees</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.28.0-DEV on <span class="colophon-date" title="Saturday 7 October 2023 07:25">Saturday 7 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
